<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="OpenWorld">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>OpenWorld</title>

  <link rel="shortcut icon" type="image/png" href="./res/favicon.png">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="./res/fontello-c7529842/css/fontawesome.css">

  <script src="./js/action.js"></script>
  <script src="./js/connection.js"></script>
  <script src="./js/display.js"></script>
  <script src="./js/game.js"></script>
  <script src="./js/gui.js"></script>
  <script src="./js/entity/entity.js"></script>
  <script src="./js/entity/entity_manager.js"></script>
  <script src="./js/math.js"></script>
  <script src="./js/options.js"></script>
  <script src="./js/renderer.js"></script>
  <script src="./js/resource_manager.js"></script>
  <script src="./js/state/state.js"></script>
  <script src="./js/state/connect_state.js"></script>
  <script src="./js/state/game_state.js"></script>
  <script src="./js/state/login_state.js"></script>
  <script src="./js/time.js"></script>
</head>

<body>
  <div style="display:none;">
    <img id="spriteSheet" src="./res/tiles.png">
  </div>

  <canvas id="mainCanvas"></canvas>
  
  <div id="login" class="scroller" hidden="hidden">
    <p>
      ><br>
      > Welcome to<br>
      > OpenWorld<br>
      > v 0.0.1<br>
      ><br>
      > <button name="fullscreen">Toggle Fullscreen</button><br>
      > <button name="audio">Enable Audio</button><br>
      > Volume <input name="volume" type="range" min="0" max="100"><br>
      ><br>
      > Login with any credentials.<br>
      > A new user is created on login and deleted on logout.<br>
      ><br>
    </p>
	  <form id="loginForm">
      <label for="username">> Username:</label>
      <input type="text" name="username" id="username" required>
      <br>
      <label for="password">> Password:</label>
      <input type="password" name="password" id="password" required>
      <br>
      > <button type="submit">Login</button>
    </form>
    <p id="loginCancel">
      > Logging in ...<br>
      ><br>
      > <button type="button">Cancel</button>
    </p>
    <p id="loginError">
      ><br>
      > Error logging in<br>
      > Please try again
    </p>
    <p id="loginMessage"></p>
    <p>
      <br>
      <br>
      > Source code: <a href="https://github.com/leolastikka/open_world">Github</a><br>
      > Other assets used in this project:<br>
      > - Font, Minecraft Regular <a href="https://www.1001freefonts.com/minecraft.font">https://www.1001freefonts.com/minecraft.font</a><br>
      > - Icons, Font Awesome <a href="https://fontawesome.com">https://fontawesome.com</a><br>
      > - Music, Shinsei <a href="https://opengameart.org/content/shinsei">https://opengameart.org/content/shinsei</a><br>
      > - Music, Menu Loop <a href="https://opengameart.org/content/menu-loop">https://opengameart.org/content/menu-loop</a><br>
      > - Music, Factory Ambiance <a href="https://opengameart.org/content/factory-ambiance">https://opengameart.org/content/factory-ambiance</a><br>
      > - Music, Flare Main <a href="https://opengameart.org/content/flare-main">https://opengameart.org/content/flare-main</a></br>
      > (Music files are currently highly compressed with reduced quality)
    </p>
  </div>

  <div id="connecting" hidden="hidden">
    <p>
      ><br>
      > Login successful!<br>
      ><br>
      > Connecting to game server...<br>
      ><br>
      > <button type="button">Cancel</button>
    </p>
  </div>

  <div id="loading" hidden="hidden">
    <p>
      ><br>
      > Loading ...
    </p>
  </div>

  <div id="gui" hidden="hidden">
    <div id="menu">
      <button name="logout"><i class="icon-logout"></i></button>
      <button name="fullscreen"><i class="icon-resize-full-alt"></i></button>
      <button name="zoomIn"><i class="icon-zoom-in"></i></button>
      <button name="zoomOut"><i class="icon-zoom-out"></i></button>
      <button name="audio"><i class="icon-volume-up"></i></button>
      <button name="log" disabled><i class="icon-doc-text"></i></button>
      <button name="equipment"><i class="icon-user"></i></button>
      <button name="skills" disabled><i class="icon-chart-bar"></i></button>
      <button name="settings"><i class="icon-cog"></i></button>
    </div>

    <ul id="dropdownMenu" hidden="hidden"></ul>

    <div id="action">
      <p name="last"></p>
      <p name="suggestion"></p>
    </div>

    <div id="dialog" class="scroller" hidden="hidden">
      <button name="close-x" class="close"><i class="icon-cancel"></i></button>
      <p name="content"></p>
      <button name="close">Close</button>
    </div>

    <div id="equipment" hidden="hidden">
      <button name="close-x" class="close"><i class="icon-cancel"></i></button>
      <p>Equipment</p>
      <p>
        Armor:<br>
        Weapon:<br>
        Ammo:<br>
      </p>
      <p>Inventory</p>
      <p>
        1 x Training Pistol<br>
        50 x Pistol Ammo
      </p>
    </div>

    <div id="settings" hidden="hidden">
      <button name="close-x" class="close"><i class="icon-cancel"></i></button>
      <p>Settings</p>
      <label>Volume</label>
      <input type="range" min="0" max="100" name="volume"><br>
      <label>Draw distance (<span name="distanceNumeric"></span>)</label>
      <input type="range" min="7" max="25" name="distance">
    </div>
  </div>

  <script>
  "use strict";
  window.addEventListener('load', (e) => {
    window.requestAnimationFrame =
        window.requestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.msRequestAnimationFrame;

    window.AudioContext = window.AudioContext ||
        window.webkitAudioContext;

    const game = new Game();
    game.start();
  });
  </script>
</body>
</html>